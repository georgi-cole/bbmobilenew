/* â”€â”€â”€ CeremonyOverlay â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Full-screen dim layer that punches rounded cut-out holes over target
 * tiles (via SVG mask) so the live GameScreen grid stays visible beneath.
 * Badges (ğŸ‘‘ ğŸ›¡ï¸ â“) animate from a start position and land onto their
 * real tile DOMRects.
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

.ceremony-overlay {
  position: fixed;
  inset: 0;
  z-index: 8700;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.35s ease;
}

.ceremony-overlay--visible { opacity: 1; }
.ceremony-overlay--exiting { opacity: 0; }

/* â”€â”€ Dim backdrop with SVG-mask cutouts â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.ceremony-overlay__dim {
  position: absolute;
  inset: 0;
}

.ceremony-overlay__dim svg {
  width: 100%;
  height: 100%;
  display: block;
}

/* â”€â”€ Animated badge â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.ceremony-overlay__badge {
  position: fixed;
  display: flex;
  align-items: center;
  justify-content: center;
  pointer-events: none;
  z-index: 8701;
  font-size: 2rem;
  line-height: 1;
  filter: drop-shadow(0 2px 12px rgba(0,0,0,0.65));
  opacity: 0;
}

/* Phase 1: badge appears and scales in at the start position (centre or off-screen) */
.ceremony-overlay__badge--appearing {
  animation: badgeAppear 0.45s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

@keyframes badgeAppear {
  from { opacity: 0; transform: scale(0.2); }
  to   { opacity: 1; transform: scale(1);   }
}

/* Phase 2: badge flies to its target tile */
.ceremony-overlay__badge--flying {
  opacity: 1;
  transition: left 0.5s cubic-bezier(0.22, 1, 0.36, 1),
              top  0.5s cubic-bezier(0.22, 1, 0.36, 1);
}

/* Phase 3: badge lands with a settle pulse */
.ceremony-overlay__badge--landed {
  opacity: 1;
  animation: badgeLand 0.35s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

@keyframes badgeLand {
  from { transform: scale(1.3); }
  to   { transform: scale(1);   }
}

/* Phase 4: badge lingers with a gentle pulse */
.ceremony-overlay__badge--holding {
  opacity: 1;
  animation: badgeHoldPulse 0.8s ease infinite alternate;
}

@keyframes badgeHoldPulse {
  from { transform: scale(0.95); }
  to   { transform: scale(1.1);  }
}

/* â”€â”€ Tile highlight glow (placed over cutout area) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.ceremony-overlay__glow {
  position: fixed;
  border-radius: 10px;
  pointer-events: none;
  z-index: 8700;
  box-shadow: 0 0 18px 4px rgba(255, 215, 0, 0.45),
              inset 0 0 8px rgba(255, 215, 0, 0.2);
  opacity: 0;
  transition: opacity 0.35s ease;
}

.ceremony-overlay--visible .ceremony-overlay__glow {
  opacity: 1;
}

.ceremony-overlay--exiting .ceremony-overlay__glow {
  opacity: 0;
}

/* â”€â”€ Caption label â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.ceremony-overlay__caption {
  position: fixed;
  left: 50%;
  transform: translateX(-50%);
  z-index: 8702;
  text-align: center;
  pointer-events: none;
  opacity: 0;
}

.ceremony-overlay__caption--visible {
  animation: captionIn 0.4s 0.3s ease both;
}

@keyframes captionIn {
  from { opacity: 0; transform: translateX(-50%) translateY(8px); }
  to   { opacity: 1; transform: translateX(-50%) translateY(0);   }
}

.ceremony-overlay--exiting .ceremony-overlay__caption {
  opacity: 0;
  transition: opacity 0.3s ease;
}

.ceremony-overlay__caption-text {
  margin: 0;
  font-size: 1.1rem;
  font-weight: 700;
  color: #fff;
  text-shadow: 0 2px 12px rgba(0,0,0,0.85);
  letter-spacing: 0.04em;
}

.ceremony-overlay__caption-sub {
  margin: 0.25rem 0 0;
  font-size: 0.85rem;
  font-weight: 600;
  color: rgba(255, 200, 60, 0.9);
  letter-spacing: 0.06em;
}

/* â”€â”€ Reduce motion â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
@media (prefers-reduced-motion: reduce) {
  .ceremony-overlay,
  .ceremony-overlay__badge,
  .ceremony-overlay__glow,
  .ceremony-overlay__caption {
    animation: none !important;
    transition: none !important;
  }
  .ceremony-overlay--visible { opacity: 1; }
  .ceremony-overlay__badge--appearing,
  .ceremony-overlay__badge--flying,
  .ceremony-overlay__badge--landed,
  .ceremony-overlay__badge--holding {
    opacity: 1;
    transform: none;
    animation: none !important;
    transition: none !important;
  }
  .ceremony-overlay__caption--visible { opacity: 1; }
  .ceremony-overlay--visible .ceremony-overlay__glow { opacity: 1; }
}
